## 编译方法

本项目使用cabal构建。安装cabal后，在项目根目录（有.cabal文件的目录）下执行`cabal build`即可自动下载依赖并构建项目。

生成的可执行文件位于`dist/build/ki/` 。

## 解释器使用方法

本项目只有一个可执行文件，名为`ki`。命令行使用方法如下：

解释执行：`ki -i <INPUT> -o <OUTPUT>`，解释执行`<INPUT>`中的代码，结果输出到`<OUTPUT>`中，若不指定则输出到`stdout`。

输出语法树：`ki -t <INPUT> -o <OUTPUT>`，解析`<INPUT>`中的代码，将语法树输出到`<OUTPUT>`中，若不指定则输出到`stdout`。

REPL：`ki --repl` （注意是双横线，与要求不同）启动REPL模式。

## REPL模式使用方法

解释执行：`:i <PROGRAM>`，解释执行并将结果输出到`stdout`。这里的`<PROGRAM>`必须是**一条 完整的**表达式，不支持换行。

输出语法树：`:t`，输出上一条通过`:i`**成功执行**的程序的语法树，语法错误或运行错误的程序的将被忽略。

退出：`:q` 

## 测试方法

在项目根目录下执行：

```bash
runhaskell -isrc -itest test/test.hs
```

将执行全部hspec测试并输出详细结果。

## 对程序语法和语义的额外约定

1. 变量名（identifier）只能由ASCII字母、数字、下划线组成，且第一个字符不能是数字。
2. 字符字面量中可以使用`\'`表示单引号；同理，字符串字面量中可以使用`\"`表示双引号；两种情况下反斜杠都用`\\`表示。
3. 对于Pair类型的运算结果，按优先级从高到低依次尝试以字符串、列表、普通Pair的形式输出。
4. 对于运算结果为（已不能再继续展开的）Lambda表达式的情况，只输出一个`<lambda>`，无法获知其内部结构。
5. 内置函数不视作lambda函数，不能partial apply。例如`((+ 2) 3)`是不允许的，必须写成`((lambda x (+ 2 x)) 3)`